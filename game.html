<html>
    <head>
        <title>RPG HTML-JS</title>
        <link rel="icon" href="favicon.ico">
        <script src="utility.js" type="text/javascript"></script>
        <script src="jquery-3.2.1.js" type="text/javascript"></script>
        <script src="canvas.js" type="text/javascript"></script>
        <script src="point.js" type="text/javascript"></script>
        <script src="vector.js" type="text/javascript"></script>
        <script src="segment.js" type="text/javascript"></script>
        <script src="rectangle.js" type="text/javascript"></script>
        <script src="spritesheet.js" type="text/javascript"></script>
        <script src="sprite.js" type="text/javascript"></script>
        <script src="animate.js" type="text/javascript"></script>
        <script src="maps.js" type="text/javascript"></script>
        <script src="world.js" type="text/javascript"></script>
        <script src="dialog.js" type="text/javascript"></script>
        <script src="keyboard.js" type="text/javascript"></script>
        <script src="mouse.js" type="text/javascript"></script>
        <script src="event.js" type="text/javascript"></script>
        
        <script language = "javascript">
            
            var Context = null;
            var framerate = 24;
            
            var canvasWidth = 480;
            var canvasHeight = 360;
            
            var sheeps = new Sprite("Panorama/AngrySheeps.jpg", 320, 240, 1, 1);
            var snowycar = new Sprite("Panorama/snowycar.jpg", 320, 240, 1, 1);
            
            var bananaphone = new Sprite("FaceSet/bananaphone.png");
            var forest = new Sprite("FaceSet/forest.png");
            var snowflake = new Sprite("FaceSet/snowflake.png");
               
            var audio1 = new Audio('Music/banana-phone.ogg');
            var audio2 = new Audio('Music/forest.ogg');
            var audio3 = new Audio('Music/snow.ogg');
            audio1.volume = 0.2;
            audio2.volume = 0.2;
            audio3.volume = 0.2;
            
            var mouse_x = 0;
            var mouse_y = 0;
            
            var charX = [0, 0];
            var charY = [0, 0];
            
            $(document).ready(function() {
                
                Context = new HTML("game", canvasWidth, canvasHeight);
                
                // Easy access to grafics (gfx)
                window.gfx = Context.context;
                
                InitializeKeyboard();
                
                InitalizeAnimationCounters();
                
                InitalizeMouse();
                
            });
            
            $(window).on('load', function () {});
            
            setInterval(function() {
                
                ResetAnimationCounter();
                
                // Layer 0: Panorama
                // Background: TODO: Implement moving background
                // Stretch panorama to canavas size for a background
                if (mapID == 0) {
                    sheeps.draw2(0, 0, canvasWidth, canvasHeight);
                }
                if (mapID == 1) {
                    snowycar.draw2(0, 0, canvasWidth, canvasHeight);
                }
                
                // Layer 1: Walkable ground 
                DrawBackgroundMap();
                
                // Layer 2: Objects on the ground below Layer 3
                //TODO: add in world.js
                
                // Layer 3: character & objects
                DrawObjects();
                

                // Draws motion of moveable objects
                DrawEvents();
                
                // Layer 4: Objects over Layer 3 - i.e. stand behind a tree
                // TODO: add in world.js
                DrawForegroundMap();

                
            }, framerate);
        
        </script>
        
    </head>


    <body background="Panorama/Background.jpg">
        <h1 id="title" >Testing</h1>
        
        <p>
            Clicking on the game disables scrolling for this website. Press "Esc" to enable it again.
            
            <button onclick="enterFullscreen(document.getElementById('game'))" id="exit">Fullscreen</button>
        </p>
        
        <p>
            WASD or Arrow-Key: Character Control; Click: Moves Character to Mouse; +/-: Speed Up/Down; Shift + WASD: Move Tilemap
        </p>
        
        <p>
            Press "Enter" to see a dialog. Press "1" for Grassmap. Press "2" for Snowmap.       
        </p>
    
        <canvas id="game"></canvas>
        
    </body>    
</html>